
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>adhoc - create jobs from adhoc bash code &mdash; Moa v0.10.14 documentation</title>
    <link rel="stylesheet" href="../../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.10.14',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="Moa v0.10.14 documentation" href="../../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../index.html">Moa v0.10.14 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <span class="target" id="module-moa.plugin.adhoc"></span><div class="section" id="adhoc-create-jobs-from-adhoc-bash-code">
<h1><strong>adhoc</strong> - create jobs from adhoc bash code<a class="headerlink" href="#adhoc-create-jobs-from-adhoc-bash-code" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="moa.plugin.adhoc.createAdhoc">
<tt class="descclassname">moa.plugin.adhoc.</tt><tt class="descname">createAdhoc</tt><big>(</big><em>job</em><big>)</big><a class="headerlink" href="#moa.plugin.adhoc.createAdhoc" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an adhoc job.</p>
</dd></dl>

<dl class="function">
<dt id="moa.plugin.adhoc.createMap">
<tt class="descclassname">moa.plugin.adhoc.</tt><tt class="descname">createMap</tt><big>(</big><em>job</em><big>)</big><a class="headerlink" href="#moa.plugin.adhoc.createMap" title="Permalink to this definition">¶</a></dt>
<dd><p>Anything after <cite>&#8211;</cite> will be stored in the <cite>process</cite> variable. If
<cite>&#8211;</cite> is omitted, Moa will query the user.</p>
<p>Moa will also query the user for input &amp; output files. An example
session:</p>
<div class="highlight-python"><pre>$ moa map -t 'test map'
process:
&gt; echo 'processing {{ input }} {{ output }}'
input:
&gt; ../10.input/*.txt
output:
&gt; ./*.out</pre>
</div>
<p>Assuming you have a number of <cite>*.txt</cite> files in the <cite>../10/input/</cite>
directory, you will see, upon running:</p>
<div class="highlight-python"><pre>processing ../10.input/test.01.txt ./test.01.out
processing ../10.input/test.02.txt ./test.02.out
processing ../10.input/test.03.txt ./test.03.out
...</pre>
</div>
<p>If the output file exists, and is newer than the input file, the
process will not be executed for that specific pair. If you need
the job to be repeated, you should either delete the output files
or <cite>touch</cite> the input files.</p>
</dd></dl>

<dl class="function">
<dt id="moa.plugin.adhoc.createReduce">
<tt class="descclassname">moa.plugin.adhoc.</tt><tt class="descname">createReduce</tt><big>(</big><em>job</em><big>)</big><a class="headerlink" href="#moa.plugin.adhoc.createReduce" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a &#8216;reduce&#8217; adhoc job.</p>
<p>There are a number of ways this command can be used:</p>
<div class="highlight-python"><pre>$ moa reduce -t 'a title' -- echo 'define a command'</pre>
</div>
<p>Anything after <cite>&#8211;</cite> will be the executable command. If omitted,
Moa will query the user for a command.</p>
<p>Moa will also query the user for input &amp; output files. An example
session:</p>
<div class="highlight-python"><pre>$ moa map -t 'something intelligent'
process:
&gt; echo 'processing {{ input }} {{ output }}'
input:
&gt; ../10.input/*.txt
output:
&gt; ./*.out</pre>
</div>
<p>Assuming you have a number of text files in the <cite>../10/input/</cite>
directory, you will see, upon running:</p>
<div class="highlight-python"><pre>processing ../10.input/test.01.txt ./test.01.out
processing ../10.input/test.02.txt ./test.02.out
processing ../10.input/test.03.txt ./test.03.out
...</pre>
</div>
</dd></dl>

<dl class="function">
<dt id="moa.plugin.adhoc.createSimple">
<tt class="descclassname">moa.plugin.adhoc.</tt><tt class="descname">createSimple</tt><big>(</big><em>job</em><big>)</big><a class="headerlink" href="#moa.plugin.adhoc.createSimple" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a &#8216;simple&#8217; adhoc job. Simple meaning that no in or output
files are tracked.</p>
<p>There are a number of ways this command can be used:</p>
<div class="highlight-python"><pre>moa simple -t 'a title' -- echo 'define a command'</pre>
</div>
<p>Anything after <cite>&#8211;</cite> will be the executable command. Note that bash
will attempt to process the command line. A safer method is:</p>
<div class="highlight-python"><pre>moa simple -t 'a title'</pre>
</div>
<p>Moa will query you for a command to execute (the parameter
<cite>process</cite>).</p>
</dd></dl>

<dl class="function">
<dt id="moa.plugin.adhoc.exclamate">
<tt class="descclassname">moa.plugin.adhoc.</tt><tt class="descname">exclamate</tt><big>(</big><em>job</em><big>)</big><a class="headerlink" href="#moa.plugin.adhoc.exclamate" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the <cite>process</cite> parameter to the last issued command. If a moa
job exists in the current directory, then the <cite>process</cite> parameter
is set without questions. (even if the Moa job in question does
not use the <cite>process</cite> parameter).  If no moa job exists, a
<cite>simple</cite> job is created first.</p>
<p><em>Note:</em> This works only when using <cite>bash</cite> and if <cite>moainit</cite> is
sourced properly. <cite>moainit</cite> defines a bash function <cite>_moa_prompt</cite>
that is called every time a command is issued (using
<cite>$PROMPT_COMMAND</cite>). The <cite>_moa_prompt</cite> function takes the last
command from the bash history and stores it in
<cite>~/.config/moa/last.command</cite>. Additionally, the <cite>_moa_prompt</cite>
function stores all commands issued in a Moa directory in
<cite>.moa/local_bash_history</cite>.</p>
</dd></dl>

<dl class="function">
<dt id="moa.plugin.adhoc.exclamateInJob">
<tt class="descclassname">moa.plugin.adhoc.</tt><tt class="descname">exclamateInJob</tt><big>(</big><em>job</em><big>)</big><a class="headerlink" href="#moa.plugin.adhoc.exclamateInJob" title="Permalink to this definition">¶</a></dt>
<dd><p>Reuse the last issued command: set it as the &#8216;process&#8217; parameters
in the current job</p>
</dd></dl>

<dl class="function">
<dt id="moa.plugin.adhoc.exclamateNoJob">
<tt class="descclassname">moa.plugin.adhoc.</tt><tt class="descname">exclamateNoJob</tt><big>(</big><em>job</em><big>)</big><a class="headerlink" href="#moa.plugin.adhoc.exclamateNoJob" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a &#8220;simple&#8221; job &amp; set the last command
to the &#8216;process&#8217; parameter</p>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/moa.logo.small.png" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../index.html">Moa v0.10.14 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2010-2012 Mark Fiers.
      Last updated on Jan 12, 2012.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>