#!/usr/bin/env python

import os
import sys
import subprocess as sp

base = os.path.abspath(os.getcwd())

cl = " ".join(sys.argv[1:])
print 'executing:'
print cl
for path, dirs, files in os.walk(base):
    toRemove = [x for x in dirs if x[0] in ['.', '_']]
    [dirs.remove(x) for x in toRemove]
    print 'executing in %s' % path
    P = sp.Popen(cl, cwd=path, shell=True)
    P.wait()
